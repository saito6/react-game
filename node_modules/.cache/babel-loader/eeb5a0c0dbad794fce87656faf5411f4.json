{"ast":null,"code":"var _jsxFileName = \"/Users/saito/Documents/GitHub/react-game/src/components/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport '../css/reset.css';\nimport '../css/index.css';\nimport Game from './Game';\nimport Info from './Info';\nimport Popup from './Popup';\nimport AppContext from '../contexts/AppContext';\nimport { cardSetf } from '../function/cardSet';\nimport { answerf } from '../function/answer'; // ========================================\n\nconst App = () => {\n  var cardSet = cardSetf(); // TODO: カードを推すたびに呼び出されちゃってる\n\n  const initialState = {\n    cardSet: cardSet,\n    //cardの並び\n    answer: answerf(cardSet),\n    //答えの組合せ\n    userChoice: [null, null],\n    //userの選択\n    floor: 1\n  };\n  const [state, setState] = useState(initialState);\n  const [judge, setJudge] = useState(false); //正解か不正解状態\n\n  const [open, setOpen] = useState(false); //表示、非表示\n\n  const [timer, setTimer] = useState(10);\n  var interval;\n  let count;\n\n  const timerf = () => {\n    console.log(timer); //なぜかnullが入っている\n\n    count = 10;\n    console.log(count);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    interval = setInterval(() => {\n      count--;\n      setTimer(count);\n      console.log(count, timer);\n\n      if (count === 0) {\n        clearInterval(interval);\n        const reset = setTimeout(() => {\n          //1秒後に時間切れでリセット\n          setTimer(10);\n          setState({\n            cardSet: cardSet,\n            answer: answerf(cardSet),\n            userChoice: [null, null],\n            floor: 1\n          });\n          setOpen(true);\n          setTimeout(setOpen, 1000, false);\n        }, 1000);\n      } // if(count === 10) {\n      //   clearInterval(interval);\n      // }\n      // if(open === true) {\n      //   clearInterval(interval);\n      // }\n\n    }, 1000); // clearInterval(interval);\n  };\n\n  useEffect( //floorを参照して変更があったときに正解不正解を識別\n  () => {\n    if (state.floor == 1) {\n      setJudge(false);\n    } else {\n      setJudge(true);\n    }\n\n    if (timer == 10) {\n      timerf();\n    }\n\n    if (timer == -1) {// 時間切れのとき\n      // console.log(timer);//なぜかnullが入っている\n      // setTimer(10);\n      // setState({\n      //   cardSet:cardSet,\n      //   answer:answerf(cardSet),\n      //   userChoice:[null,null],\n      //   floor:1\n      // });\n      // setOpen(true);\n      // setTimeout(setOpen,1000,false);\n    } else if (open === true) {// timerf();\n    }\n  }, [state.floor, timer, open]); // useEffect(//timer\n  //   () => {\n  //     if(open === false ){\n  //       // setTimer(10);\n  //       console.log(timer);//なぜかnullが入っている\n  //       timerf();\n  //     }\n  //   },[open]\n  // );\n\n  return /*#__PURE__*/React.createElement(AppContext.Provider, {\n    value: {\n      state,\n      setState,\n      open,\n      setOpen,\n      judge,\n      timer,\n      setTimer\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"game\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Game, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Info, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Popup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }))));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/saito/Documents/GitHub/react-game/src/components/App.js"],"names":["React","useState","useEffect","Game","Info","Popup","AppContext","cardSetf","answerf","App","cardSet","initialState","answer","userChoice","floor","state","setState","judge","setJudge","open","setOpen","timer","setTimer","interval","count","timerf","console","log","clearInterval","setInterval","reset","setTimeout"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\n\nimport '../css/reset.css';\nimport '../css/index.css';\n\nimport Game from './Game';\nimport Info from './Info';\nimport Popup from './Popup';\nimport AppContext from '../contexts/AppContext';\n\nimport {cardSetf} from '../function/cardSet';\nimport {answerf} from '../function/answer';\n\n// ========================================\n\nconst App = () => {\n  var cardSet = cardSetf();// TODO: カードを推すたびに呼び出されちゃってる\n  const initialState = {\n    cardSet:cardSet,//cardの並び\n    answer:answerf(cardSet),//答えの組合せ\n    userChoice:[null,null],//userの選択\n    floor:1\n  }\nconst [state,setState] = useState(initialState);\nconst [judge,setJudge] = useState(false);//正解か不正解状態\nconst [open,setOpen] = useState(false);//表示、非表示\nconst [timer,setTimer] = useState(10);\n\nvar interval;\nlet count;\nconst timerf = () => {\n  console.log(timer);//なぜかnullが入っている\n    count = 10;\n    console.log(count);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n    clearInterval(interval);\n  interval = setInterval(() => {\n    count--;\n    setTimer(count);\n    console.log(count,timer);\n    if(count === 0) {\n      clearInterval(interval);\n      const reset = setTimeout(() => {//1秒後に時間切れでリセット\n        setTimer(10);\n        setState({\n          cardSet:cardSet,\n          answer:answerf(cardSet),\n          userChoice:[null,null],\n          floor:1\n        });\n        setOpen(true);\n        setTimeout(setOpen,1000,false);\n      }, 1000);\n    }\n    // if(count === 10) {\n    //   clearInterval(interval);\n    // }\n    // if(open === true) {\n    //   clearInterval(interval);\n    // }\n  }, 1000);\n    // clearInterval(interval);\n}\n  useEffect(//floorを参照して変更があったときに正解不正解を識別\n    () => {\n      if(state.floor == 1){\n        setJudge(false);\n      }\n      else{\n        setJudge(true);\n      }\n      if(timer == 10){\n        timerf();\n      }\n      if(timer == -1){// 時間切れのとき\n        // console.log(timer);//なぜかnullが入っている\n        // setTimer(10);\n        // setState({\n        //   cardSet:cardSet,\n        //   answer:answerf(cardSet),\n        //   userChoice:[null,null],\n        //   floor:1\n        // });\n        // setOpen(true);\n        // setTimeout(setOpen,1000,false);\n      }\n      else if (open === true) {\n        // timerf();\n      }\n    },\n    [state.floor,timer,open]\n  );\n\n\n  // useEffect(//timer\n  //   () => {\n  //     if(open === false ){\n  //       // setTimer(10);\n  //       console.log(timer);//なぜかnullが入っている\n  //       timerf();\n  //     }\n  //   },[open]\n  // );\n\n  return(\n    <AppContext.Provider value={{state,setState,open,setOpen,judge,timer,setTimer}}>\n    <div className=\"game\">\n      <div className=\"inner\">\n        <Game />\n        <Info />\n        <Popup />\n      </div>\n    </div>\n    </AppContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}